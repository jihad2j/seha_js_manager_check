{"version":3,"sources":["api.js"],"names":["resultsDiv","document","getElementById","toggleButton","inputid","trim","inputpsl","length","convertDate","dateString","arabicNumbers","englishNumbers","convertedDateString","i","indexOf","char","index","split","dateParts","value","checkValues","addEventListener","inputnormalizedservicecode","inputpatientid","gsl","normalizedservicecode","headers","method","response","json","body","JSON","data","message","patientid","alerterror","style","display","submit","textContent","inputnamear","datam","inputdatesick","alerterror2","inputdaynum","inputdatefrom","inputdateto","inputdoctorar","inputworktypear","iii"],"mappings":"aAEA,IAAAA,WAAAC,SAAAC,eAAA,cAEIF,OAAAA,SAAaC,eAASC,UAEtBC,aAAeF,SAASC,eAAe,gBAA3C,SAAIC,YAAeF,EAASC,GAIxB,OAFJE,EAAAA,EAAAC,OAIIC,EAAWA,EAASD,OAFpB,IAAAD,EAAAG,QAAA,IAAAD,EAAAC,OAMC,SAAMC,YAAAC,GAIX,IAHQ,IAAAC,EAAA,CAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,KACHC,EAAA,CAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,KACJC,EAAA,GACQJ,EAAAA,EAATK,EAAqBJ,EAAYF,OAAAM,IAAA,CACzBH,IAAAA,EAAAA,EAAsBG,GACtBF,EAAAA,EAAiBG,QAAgBC,IACjCH,GAAAA,IAMAG,EAAOJ,EAAeK,IAHxBJ,GAAAG,EAEA,IAAIC,EAAJJ,EAAiBK,MAAA,KAEhB,OADCF,EAAOJ,EAAP,GAAA,IAAAO,EAAA,GAAA,IAAAA,EAAA,GAEFN,OAAAA,iBAAmB,QAAnB,WAEF,IAOIN,EAPJL,SAAAC,eAAA,yBAO0CiB,MANtCD,EAOiBjB,SAASC,eAAe,aAP7BU,MAYhB,GATDQ,YAAAhB,EAAAE,GASY,CARRe,IAAAA,EAA0Bf,EACzBgB,EAAAA,EACAhB,MAAQ,YAAGgB,CACXC,OAAc,OACdnB,KAAUmB,KAAAA,UAAeJ,CAUnBK,IAAKC,EAPHL,GAAAA,IACZM,QAAW,CACHD,eAAwBnB,sBAGxBqB,KAAQ,SAAAC,GADO,OAAAA,EAAAC,SAEfC,KAAMC,SAAAA,GACD,GAAEN,MAAAA,GADc,UAAAO,EAAAC,QAEfC,YAAAA,MAAAA,QAAAA,OAJSC,WAAAC,MAAAC,QAAA,OAMNlC,aAAAiC,MAAAC,QAAA,SACLC,OAAAF,MAAgBC,QAAA,WAGlB,CAAYT,SAASC,eAAb,eAAAU,YAAAP,EAAAQ,YACR,IACWC,EAAQT,YADfA,EAAIU,eAENC,SAAAzC,eAA4B,iBAA5BqC,YAAAE,EACAN,SAAiBE,eAAU,YAAOE,YAAAP,EAAAY,YAUlC3C,SAASC,eAAe,SAASqC,YAAcP,EAAKa,cATpD1C,SAAaiC,eAAgB,OAASG,YAAAP,EAAAc,YAWtC7C,SAASC,eAAe,cAAcqC,YAAcP,EAAKe,cAVlDX,SAAMC,eAAiB,YAAAE,YAAAP,EAAAgB,gBAC9BhD,WAAAoC,MAAAC,QAAA,OACGlC,aAAAiC,MAAAC,QAAA,SACKC,OAACpC,MAAAA,QAAe,OACjBiC,WAAQO,MAAAA,QAAf,OACID,YAAQjC,MAAYyC,QAAxB,UA9BR3C,MAiCQL,mBAgBRkC,WAAWC,MAAMC,QAAU,OAXnBlC,YAAYiC,MAAZC,QAAA,SAEAF,aAAAA,iBAAiBE,QAAU,WACfD,SAAMC,eAAlB,yBACHlB,MAAA,GAEElB,SAnCPC,eAAA,aAuCGiB,MAAA,GACHgB,aAAWC,MAAMC,QAAU,OAC3BM,WAAWP,MAAXC,QAAA,OACHC,OAAAF,MAAAC,QAAA,SAELF,WAAAC,MAAAC,QAAA,OAUIM,YAAYP,MAAMC,QAAU","file":"api.min.js","sourcesContent":["//var wls = window.location.search;\r\n//var url = new URLSearchParams(wls);\r\n//var inputElement = document.getElementById(\"service-code\");\r\n\r\nvar resultsDiv = document.getElementById('resultsDiv');//info\r\nvar submit = document.getElementById('submit');//submit\r\nvar toggleButton = document.getElementById('toggleButton')//res\r\n//جلب رقم المركز ورقم الهوية\r\n// دالة للتحقق من طول القيمتين\r\nfunction checkValues(inputid, inputpsl) {\r\n    // إزالة المسافات الزائدة\r\n    inputid = inputid.trim();\r\n    inputpsl = inputpsl.trim();\r\n    // التحقق من الطول\r\n    if (inputid.length == 10 && inputpsl.length == 14) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\nfunction convertDate(dateString) {\r\n    var arabicNumbers = ['٠', '١', '٢', '٣', '٤', '٥', '٦', '٧', '٨', '٩'];\r\n    var englishNumbers = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\r\n    var convertedDateString = \"\";\r\n    // تحويل الأرقام العربية إلى الأرقام الإنجليزية\r\n    for (var i = 0; i < dateString.length; i++) {\r\n      var char = dateString[i];\r\n      var index = arabicNumbers.indexOf(char);\r\n      if (index != -1) {\r\n        char = englishNumbers[index];\r\n      }\r\n      convertedDateString += char;\r\n    }\r\n    // عكس تنسيق التاريخ\r\n    var dateParts = convertedDateString.split(\"-\");\r\n    convertedDateString = dateParts[2] + \"-\" + dateParts[1] + \"-\" + dateParts[0];\r\n    return convertedDateString;\r\n  }\r\nsubmit.addEventListener('click', function () {\r\n    var inputnormalizedservicecode = document.getElementById(\"normalizedservicecode\");\r\n    var inputpsl = inputnormalizedservicecode.value;\r\n    var inputpatientid = document.getElementById(\"patientid\");\r\n    var inputid = inputpatientid.value;\r\n\r\n    // استدعاء الدالة للتحقق من القيم\r\n    var valid = checkValues(inputid, inputpsl);\r\n    if (valid) {\r\n        var normalizedservicecode = inputpsl;\r\n        var patientid = inputid;\r\n        fetch('/infosick', {\r\n            method: 'post',\r\n            body: JSON.stringify({\r\n              gsl: normalizedservicecode,\r\n              id: patientid,\r\n            }),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (data === null || data === undefined || data.message === 'error') {\r\n                alerterror2.style.display = 'none';\r\n                alerterror.style.display = 'grid';//لايوجد نتائج\r\n                toggleButton.style.display = 'inline';//res\r\n                submit.style.display = 'none';//submit\r\n                //window.location = 'login'\r\n            } else {\r\n                document.getElementById('patientname').textContent = data.inputnamear;\r\n                var iii = data.inputdatesick;\r\n                var datam = convertDate(iii); \r\n                document.getElementById('sickleavedate').textContent = datam;\r\n                document.getElementById('duration').textContent = data.inputdaynum;\r\n                document.getElementById('from1').textContent = data.inputdatefrom;\r\n                document.getElementById('to1').textContent = data.inputdateto;\r\n                document.getElementById('doctorname').textContent = data.inputdoctorar;\r\n                document.getElementById('jobtitle').textContent = data.inputworktypear;\r\n                resultsDiv.style.display = 'flex';//info\r\n                toggleButton.style.display = 'inline';//res\r\n                submit.style.display = 'none';//submit\r\n                alerterror.style.display = 'none';\r\n                alerterror2.style.display = 'none';\r\n            }\r\n        })\r\n        .catch(() => { \r\n        });\r\n\r\n\r\n    } else {\r\n        alerterror.style.display = 'none';\r\n        alerterror2.style.display = 'grid';\r\n    }\r\n});\r\n//325156565651561565651561\r\ntoggleButton.addEventListener('click', function () {\r\n    const inputpsll = document.getElementById(\"normalizedservicecode\");\r\n    inputpsll.value = \"\";\r\n    const inputidd = document.getElementById(\"patientid\");\r\n    inputidd.value = \"\";\r\n    toggleButton.style.display = 'none';//res\r\n    resultsDiv.style.display = 'none';//info\r\n    submit.style.display = 'inline';//submit\r\n    alerterror.style.display = 'none';\r\n    alerterror2.style.display = 'none';\r\n\r\n\r\n});\r\n"]}